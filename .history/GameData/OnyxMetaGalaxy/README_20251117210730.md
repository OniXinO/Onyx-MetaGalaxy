# Onyx MetaGalaxy (KSP 1.12.5)

Мета: агрегатор профілів для одночасної інсталяції кількох планетпаків KSP1 без прямого їхнього включення у збірку. Профілі зберігаються у `.cfg`, а активація робиться скриптом, який створює маркери для ModuleManager.

Важливо:
- Мод НЕ містить жодного стороннього планетпаку — їх треба ставити окремо у `GameData` (з повагою до ліцензій авторів).
- Потрібні залежності: `Kopernicus`, `ModuleManager` відповідних версій для KSP 1.12.5.

Структура:
- `GameData/OnyxMetaGalaxy/OnyxMetaGalaxySettings.cfg` — вибір активного профілю.
- `GameData/OnyxMetaGalaxy/Profiles/*.cfg` — файли профілів (список паків `id` + `enabled`).
- `tools/ActivateProfile.ps1` — скрипт, що за профілем створює або прибирає маркерні папки `GameData/OnyxMetaGalaxy_Enable_<PackId>`.

Як працює:
1. Встановіть бажані планетпаки у `GameData` (наприклад `OuterPlanetsMod`, `JNSQ`, тощо).
2. Відкрийте `GameData/OnyxMetaGalaxy/Profiles/default.cfg` і проставте `enabled = true/false` для кожного `Pack`.
3. За потреби змініть активний профіль у `OnyxMetaGalaxySettings.cfg` (`activeProfile = default`).
4. Запустіть скрипт `tools/ActivateProfile.ps1` (можна передати `-ActiveProfile <name>`).
5. Скрипт створить маркери `GameData/OnyxMetaGalaxy_Enable_<id>`, які ModuleManager трактує як «наявні моди». Їх можна використовувати у патчах через `:NEEDS[OnyxMetaGalaxy_Enable_<id>]`.
6. Запускайте KSP — профіль застосовано.

Приклад патча для інтеграції (у вашому або сторонньому моді):

```
// Патч спрацює лише якщо увімкнено OPM профілем
@Kopernicus:NEEDS[OuterPlanetsMod,OnyxMetaGalaxy_Enable_OuterPlanetsMod]
{
  // Тут може бути інтеграційний конфіг (ресурси, налаштування, баланс)
}
```

Найменування `id`:
- Воно має точно співпасти з назвою папки паку у `GameData` (наприклад `OuterPlanetsMod`, `GalileoPlanetPack`, `JNSQ`).

Обмеження та зауваження:
- Деякі планетпаки конфліктують між собою (зміни стокових тіл, однакові імена, індекси зоряних систем). Користуйтеся документаціями паків і тестуйте комбінації.
- Цей мод не втручається у вміст інших модів і не видаляє їхні конфіги — він лише надає механізм профільних маркерів для керування інтеграційними патчами.
- Для складніших сценаріїв (динамічне відключення вузлів `Kopernicus`) можна розширити мод власним плагіном на C#, який під час завантаження БД фільтруватиме `ConfigNode` за шляхами файлів. Це буде наступним етапом.