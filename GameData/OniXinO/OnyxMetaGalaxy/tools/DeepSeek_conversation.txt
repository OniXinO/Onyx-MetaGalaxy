ось мій діалог:
Хочу створити власний мод для KSP 1.12.5.3190
це повинен бути планет пак. назвемо його - Onyx MetaGalaxy.
суть — зібрати всі відомі мені планет паки в один мод, відшліфувати сумісність з іншими планет паками та модами та максимально універсалізувати для різних версій KSP
візьмемо за основу стокову систему, OPM (Outer Planets Mod) і будемо придумувати способи додавати нові моди до колекції

відповідь дс (діпсік):

Ми створюємо мод, який об'єднує кілька планетних систем (планет паки) в один. Основою буде стокова система та OPM, а також ми хочемо мати можливість додавати інші планет паки.

План:

Структура папок і файлів для мода.

Налаштування конфігураційних файлів для кожної планетної системи.

Забезпечення сумісності між різними планет паками.

Можливість вмикати/вимикати певні планет паки через налаштування.

Для KSP 1.12.5.3190 ми будемо використовувати принципи створення модів для KSP, зокрема, використання ModuleManager для об'єднання конфігурацій.

Кроки:

Створюємо структуру папок для мода Onyx MetaGalaxy:
GameData/OnyxMetaGalaxy/
OnyxMetaGalaxy.version
README.md
Licenses/
Composites/
Stock.cfg
OPM.cfg
... інші планет паки ...
Configs/
... конфігурації для модів, які додають планет паки ...
Scatterer/
... конфігурації для Scatterer, якщо потрібно ...
Kopernicus/
... конфігурації для Kopernicus (необхідні для створення планет) ...
Textures/
... текстури для планет ...

Оскільки ми хочемо мати можливість вмикати/вимикати планет паки, ми можемо використовувати модуль ModuleManager і створювати патчі, які залежать від налаштувань.

Для кожної планетної системи (наприклад, OPM) ми створюємо окремий файл конфігурації в папці Composites. Цей файл буде містити всі необхідні дані для створення планет, їхніх супутників, орбіт і т.д.

Ми також хочемо забезпечити сумісність з іншими модами, такими як Kopernicus (обов'язково), Scatterer, EVE тощо.

Для універсальності для різних версій KSP ми будемо використовувати ModuleManager для умовного додавання конфігурацій в залежності від версії гри.

Ми також можемо додати власні планетні системи, які ми придумаємо.

Для того, щоб зібрати все воєдино, ми створимо головний файл конфігурації, який буде включати в себе інші файли, якщо вони увімкнені.

Приклад структури головного файлу (OnyxMetaGalaxy.cfg) в GameData/OnyxMetaGalaxy:

text
@Kopernicus:FOR[OnyxMetaGalaxy] {
    // Тут ми можемо включити інші файли за умовою
}
Але краще використовувати ModuleManager для умовного включення.

Ми можемо створити файл налаштувань, де користувач може вказати, які планет паки вмикати.

Оскільки Kopernicus вимагає певних версій KSP, ми повинні вказати це в нашому моді.

Створюємо файл версії (OnyxMetaGalaxy.version) для сумісності з KSP-AVC.

Ми також повинні подбати про ліцензії на використання інших планет паків. Тому ми додамо папку Licenses, де будуть ліцензії всіх використаних модів.

Для початку роботи нам потрібно встановити Kopernicus, без нього планет паки не працюватимуть.

Ми можемо додати наш власний планет пак, який буде додавати нові планети в систему.

Для кожного планет паку ми повинні переконатися, що орбіти не перетинаються і що система стабільна.

Ми можемо використовувати існуючі текстури з інших модів, але ми повинні мати дозвіл на їх використання.

Якщо ми хочемо, щоб мод був універсальним для різних версій, ми повинні перевірити, чи Kopernicus підтримує ці версії.

Ми також можемо додати підтримку модів, таких як Distant Object Enhancement, PlanetShine тощо.

Для того, щоб уникнути конфліктів, ми повинні переконатися, що кожне небесне тіло має унікальну назву.

Ми можемо використовувати ModuleManager для видалення або зміни існуючих небесних тіл, якщо це необхідно.

Оскільки ми хочемо зібрати багато планет паків, ми повинні пам'ятати про продуктивність.

Ми можемо створити кілька конфігурацій: для слабких комп'ютерів (без деяких планет паків) і для потужних.

Ми також можемо додати власні наукові експерименти, биоми тощо.

Для спрощення ми можемо використовувати вже існуючі моделі та текстури, але ми повинні мати на них ліцензію.

Ми повинні дотримуватися ліцензійних умов Kopernicus, який дозволяє створювати модифікації, але з певними обмеженнями.

Ми можемо створити власний сайт або сторінку на форумі KSP для нашого мода.

Ми також повинні додати інструкцію з встановлення.

Для тестування нам знадобиться KSP з встановленим Kopernicus і іншими модами.

Ми можемо використовувати інструменти, такі як KittopiaTech для створення планет.

Ми повинні переконатися, що наш мод не порушує авторські права.

Ми можемо додати підтримку модів, таких как Custom Pre Launch Checks, щоб перевіряти, чи всі необхідні моди встановлені.

Ми також можемо створити власні сцени для меню KSP.

Ми повинні мати на увазі, що Kopernicus може змінюватися, тому ми повинні стежити за оновленнями.

Ми можемо використовувати GitHub для зберігання коду та конфігурацій.

Ми повинні додати файл README.md з описом мода.

Ми повинні додати файл .version для KSP-AVC.

Ми повинні додати changelog.

Ми повинні переконатися, що наш мод працює з іншими модами, які додають нові планети (наприклад, Galileo's Planet Pack).

Ми можемо додати опцію для видалення стокових планет, якщо користувач хоче мати тільки планет паки.

Ми можемо додати власні планетні системи навколо інших зірок (за допомогою модів, таких как Kopernicus Expansions: Beyond Kerbol).

Ми повинні переконатися, що наш мод не ламає баланс гри.

Ми можемо додати власні контракти для місій.

Ми можемо додати власні технології в дерево досліджень.

Ми можемо додати власні деталі для ракет.

Ми можемо додати власні биоми для планет.

Ми можемо додати власні атрівбути для планет (наприклад, атмосферу, кільця, хмари).

Ми можемо використовувати модульні системи для додавання нових функцій.

Ми повинні переконатися, що наш мод не ламає збереження гри.

Ми повинні переконатися, що наш мод не викликає падіння гри.

Ми повинні переконатися, що наш мод не викликає помилок в логах.

Ми повинні переконатися, що наш мод не викликає конфліктів з іншими модами.

Оскільки це дуже масштабний проект, ми почнемо з основної структури та додамо кілька планет паків.

Давайте створимо базову структуру для мода Onyx MetaGalaxy.

Створюємо папку OnyxMetaGalaxy в GameData.

Всередині папки OnyxMetaGalaxy створюємо наступні папки та файли:

OnyxMetaGalaxy.version

README.md

Licenses/

Composites/

Configs/

Textures/

Тепер створимо головний файл конфігурації, який буде включати інші файли. Назвемо його OnyxMetaGalaxy.cfg.

У файлі OnyxMetaGalaxy.cfg ми використовуємо ModuleManager для включення інших конфігурацій.

Приклад:

text
// Onyx MetaGalaxy - головний файл конфігурації
// Включаємо стокову систему
@Kopernicus:FOR[OnyxMetaGalaxy] {
    !Body[Sun] {}
    // Тут ми можемо перевизначити Сонце, якщо потрібно
}

// Включаємо OPM
#include "OnyxMetaGalaxy/Composites/OPM.cfg"

// Включаємо інші планет паки
// #include "OnyxMetaGalaxy/Composites/OtherPack.cfg"
Але краще використовувати ModuleManager для умовного включення.

Ми можемо створити файл налаштувань, де користувач може вказати, які планет паки вмикати. Наприклад, створимо файл OnyxMetaGalaxy_Settings.cfg:

text
OnyxMetaGalaxy
{
    enabledPacks
    {
        Stock = true
        OPM = true
        OtherPack = false
    }
}
Тоді в головному файлі ми можемо робити перевірки:

text
#if [OnyxMetaGalaxy]::enabledPacks:Stock == true
    #include "OnyxMetaGalaxy/Composites/Stock.cfg"
#endif

#if [OnyxMetaGalaxy]::enabledPacks:OPM == true
    #include "OnyxMetaGalaxy/Composites/OPM.cfg"
#endif
Але на жаль, ModuleManager не підтримує такий синтаксис напряму. Замість цього ми можемо використовувати :NEEDS, :BEFORE, :AFTER, :FOR.

Інший спосіб - створити окремі файли для кожного планет паку і використовувати :NEEDS для перевірки наявності інших модів. Але ми хочемо, щоб користувач міг вибирати, які планет паки вмикати.

Ми можемо використовувати :FOR[OnyxMetaGalaxy] і потім видаляти тіла, які не повинні бути включеними, але це складніше.

Краще створити окремі файли для кожного планет паку і дозволити користувачеві видаляти їх, якщо він не хоче їх використовувати.

Ми можемо створити папку Composites і покласти туди файли для кожного планет паку. Користувач може видалити файл, щоб вимкнути планет пак.

Але це не дуже зручно. Тому ми можемо створити папку Enabled і Disabled, і користувач може переміщувати файли між ними. Але це вимагає додаткових дій.

Інший спосіб - використовувати ModuleManager і створити патч, який перевіряє наявність певного файлу налаштувань.

Ми можемо створити файл OnyxMetaGalaxy_Config.cfg, де будуть зберігатися налаштування, і потім в кожному файлі планет паку робити перевірку.

Наприклад, в OPM.cfg:

text
@Kopernicus:FOR[OnyxMetaGalaxy]:NEEDS[OnyxMetaGalaxy_OPM] {
    // Ось конфігурація для OPM
}
А потім створити файл OnyxMetaGalaxy_OPM.cfg з порожнім вмістом. Якщо користувач хоче вимкнути OPM, він може видалити цей файл.

Але це теж не дуже зручно, тому що користувач повинен шукати ці файли.

Ми можемо зробити так, щоб наш мод мав власне меню в грі для налаштувань, але це вимагає написання плагіна на C#.

Оскільки ми хочемо максимально універсалізувати, ми можемо обійтися без плагіна і використовувати ModuleManager.

Давайте створимо файл OnyxMetaGalaxy_Global.cfg, який буде містити глобальні налаштування:

text
OnyxMetaGalaxy
{
    %OPMEnabled = true
    %OtherPackEnabled = false
}
А потім в OPM.cfg:

text
#if :NEEDS[OnyxMetaGalaxy_Global] :& :HAS[~OPMEnabled[true]]
    // Конфігурація OPM
#endif
Але ModuleManager не підтримує такий синтаксис.

Інший спосіб - використовувати :FINAL і перевіряти налаштування в одному файлі.

Ми можемо створити головний файл, який буде включати інші файли в залежності від налаштувань, але для цього ми повинні мати можливість зчитувати налаштування з іншого файлу.

Можна зробити так:

text
// OnyxMetaGalaxy.cfg
#include "OnyxMetaGalaxy_Global.cfg"

// Якщо OPMEnabled в OnyxMetaGalaxy_Global.cfg встановлений в true, то включаємо OPM
@Kopernicus:FOR[OnyxMetaGalaxy]:NEEDS[OnyxMetaGalaxy_Global] {
    #$OPMEnabled@OnyxMetaGalaxy[OPMEnabled]
}

#if #$OPMEnabled$
    #include "OnyxMetaGalaxy/Composites/OPM.cfg"
#endif
Але ModuleManager не підтримує #if з змінними.

Тому найпростіший спосіб - це дозволити користувачеві коментувати або видаляти строки #include в головному файлі.

Ми можемо надати інструкцію в README.md, як вмикати і вимикати планет паки.

Тому ми створимо головний файл OnyxMetaGalaxy.cfg з таким вмістом:

text
// Onyx MetaGalaxy - головний файл конфігурації
// Вимикніть планет паки, які ви не хочете використовувати, закоментувавши або видаливши строки #include

// Стокова система (завжди включена, оскільки є основою)
#include "OnyxMetaGalaxy/Composites/Stock.cfg"

// OPM
#include "OnyxMetaGalaxy/Composites/OPM.cfg"

// Інші планет паки
// #include "OnyxMetaGalaxy/Composites/OtherPack.cfg"
Тепер користувач може легко керувати тим, які планет паки вмикати.

Тепер створимо файл для стокової системи. Ми не будемо змінювати стокову систему, але ми можемо додати деякі покращення або змінити її, якщо потрібно.

У файлі Stock.cfg ми можемо перевизначити стокові планети, якщо це необхідно. Але зазвичай, якщо ми хочемо залишити стокову систему без змін, нам не потрібно нічого робити. Однак, оскільки ми хочемо додати OPM, ми повинні переконатися, що OPM не конфліктує з стоковою системою.

OPM додає планети за орбітою Джула, тому конфліктів не повинно бути.

Тепер створимо файл OPM.cfg. Ми можемо взяти оригінальний файл OPM і покласти його в папку Composites. Але ми повинні мати дозвіл на використання OPM в нашому моді.

Ми не можемо просто взяти чужий мод і включити його в наш без дозволу. Тому ми повинні або отримати дозвіл, або зробити так, щоб наш мод вимагав встановлення OPM окремо.

Якщо ми хочемо, щоб наш мод був самодостатнім, ми повинні отримати дозвіл від авторів OPM.

Але для прикладу ми будемо вважати, що ми отримали дозвіл.

Оригінальний OPM має багато файлів і текстури. Ми можемо або включити їх в наш мод, або зробити наш мод залежним від OPM.

Якщо ми робимо наш мод залежним від OPM, то ми повинні використовувати :NEEDS[OPM] і включити конфігурацію OPM тільки якщо OPM встановлено.

Але тоді наш мод не буде самодостатнім.

Ми хочемо зібрати всі планет паки в один мод, тому ми включимо всі необхідні файли.

Однак, це може призвести до дуже великого розміру мода.

Інший спосіб - створити кілька версій: повну і легку.

Але для початку ми зробимо повну версію.

Ми повинні переконатися, що ми не порушуємо ліцензії.

Тепер створимо файл OPM.cfg. Ми можемо взяти оригінальний файл OPM і помістити його в Composites, але ми повинні також включити текстури.

Оригінальний OPM має структуру:

text
GameData/OPM/
    OPM.cfg
    OPM_Textures/
        ... текстури ...
Ми можемо скопіювати вміст OPM.cfg в наш OPM.cfg і змінити шляхи до текстур.

Наприклад, в оригінальному OPM.cfg:

text
Body
{
    name = Sarnus
    // ...
    Texture
    {
        path = OPM/OPM_Textures/Sarnus_color
        // ...
    }
}
Ми змінимо шлях на:

text
path = OnyxMetaGalaxy/Textures/OPM/Sarnus_color
І скопіюємо текстури в папку OnyxMetaGalaxy/Textures/OPM/

Але це займе багато місця.

Ми можемо залишити текстури в оригінальних шляхах, але тоді ми повинні зберегти структуру OPM.

Але тоді наш мод буде включати в себе весь OPM.

Ми можемо зробити так, щоб наш мод містив лише конфігураційні файли, а текстури бралися з оригінальних модів. Але тоді користувач повинен буде встановити всі ці моди.

Це питання вибору.

Для зручності ми зробимо самодостатній мод, але з можливістю використовувати текстури з оригінальних модів, якщо вони встановлені.

Ми можемо використовувати :NEEDS для перевірки наявності оригінальних модів і якщо вони є, то не включати текстури.

Але це складніше.

Для початку ми просто включимо все в наш мод.

Тепер створимо файл версії.

OnyxMetaGalaxy.version:

text
{
    "NAME": "Onyx MetaGalaxy",
    "URL": " `https://raw.githubusercontent.com/YourUsername/OnyxMetaGalaxy/master/OnyxMetaGalaxy.version` ",
    "DOWNLOAD": " `https://github.com/YourUsername/OnyxMetaGalaxy/releases` ",
    "VERSION": {
        "MAJOR": 1,
        "MINOR": 0,
        "PATCH": 0,
        "BUILD": 0
    },
    "KSP_VERSION": {
        "MAJOR": 1,
        "MINOR": 12,
        "PATCH": 5
    },
    "KSP_VERSION_MIN": {
        "MAJOR": 1,
        "MINOR": 12,
        "PATCH": 5
    },
    "KSP_VERSION_MAX": {
        "MAJOR": 1,
        "MINOR": 12,
        "PATCH": 5
    }
}
Ми вказуємо, що наш мод працює тільки на KSP 1.12.5, але ми можемо змінити KSP_VERSION_MIN і KSP_VERSION_MAX, якщо хочемо підтримувати більше версій.

Тепер створимо README.md:

text
# Onyx MetaGalaxy

Цей мод збирає в собі багато планет паків для KSP.

## Встановлення

1. Встановіть Kopernicus (версія, яка підтримує вашу версію KSP).
2. Завантажте і розпакуйте цей мод в папку GameData.

## Налаштування

Відкрийте файл `GameData/OnyxMetaGalaxy/OnyxMetaGalaxy.cfg` і закоментуйте або видаліть строки #include для тих планет паків, які ви не хочете використовувати.

## Включені планет паки

- Stock (стокова система)
- OPM (Outer Planets Mod)

## Ліцензії

Див. в папці Licenses.

## Автори

- Ваше ім'я

## Подяки

- Авторам OPM та інших модів, які були використані.