# Onyx MetaGalaxy (OMG) для KSP 1.12.5

Мета: агрегатор профілів для інсталяції/комбінації планетпаків KSP1 без включення їхньої ліцензійної частини у збірку. Профілі у `.cfg`, активація через скрипт, який створює маркерні моди для ModuleManager.

Структура:
- `GameData/OniXinO/OMG/OMGSettings.cfg` — вибір активного профілю.
- `GameData/OniXinO/OMG/Profiles/*.cfg` — профілі зі списком `Pack { id; enabled }`.
- Маркери: `GameData/OniXinO/OMG_Enable_<PackId>` — створюються скриптом.
 - Фільтрація: увімкнення/поведінка контролюється налаштуваннями у `OMGSettings.cfg`.

Залежності:
- Встановлені планетпаки у `GameData` (наприклад `OuterPlanetsMod`, `JNSQ` тощо).
- `Kopernicus`, `ModuleManager` для KSP 1.12.5.

Використання:
1. Встановіть потрібні планетпаки у `GameData`.
2. Відредагуйте `Profiles/default.cfg`, увімкніть/вимкніть `enabled`.
3. За потреби змініть активний профіль у `OMGSettings.cfg` (`activeProfile = default`).
4. Налаштування у `OMGSettings.cfg`:
   - `strictMarkers = true|false` — не створювати маркери для відсутніх паків у `GameData` (true рекомендовано).
   - `filterDisabledPacks = true|false` — фільтрувати `ConfigNode` для вимкнених паків (вимкнено за замовчуванням).
   - `filterSafeMode = true|false` — безпечний режим фільтрації: лише логування кандидатів (true рекомендовано спочатку).
4. Запустіть `tools/ActivateProfile.ps1` (опційно `-ActiveProfile <name>`).
5. Скрипт створить/прибере маркери `GameData/OniXinO/OMG_Enable_<id>`, їх можна перевірити у файловій системі.
6. Запускайте KSP.

Приклад ModuleManager патча для інтеграції:

```
// Спрацює лише якщо пак OPM увімкнений у профілі (папка паку існує)
@Kopernicus:NEEDS[OuterPlanetsMod]
{
  // Інтеграційний конфіг (ресурси/баланс/налаштування)
}
```

Зауваження:
- `id` має збігатися з назвою папки паку у `GameData`.
- Деякі пакети конфліктують, тестуйте комбінації.
- Скрипт не видаляє чужі файли, лише керує маркерами.
 - У строгому режимі маркери НЕ створюються, якщо папка паку відсутня у `GameData`.
 - Якщо `filterDisabledPacks = true` і `filterSafeMode = false`, плагін буде прибирати `ConfigNode` завантажені з файлів вимкнених паків.
 - Перед вимкненням безпечного режиму перегляньте логи `[OMG]` у KSP для підтвердження кандидатів.

Версіювання:
- Файл `GameData/OniXinO/OMG/OMG.version` (KSP-AVC) містить версію і посилання на релізи.
- Оновлення: BUILD збільшується при змінах функціональності/документації; великі зміни — PATCH/MINOR/MAJOR.
- Див. `CHANGELOG.md` для списку змін.

Профілі продуктивності (0.0.1):
- Рівні: Productivity (низький пріоритет графіки), Balance (середній), Quality (високий), Ultra (ультра).
- У 0.0.1 реалізовано профілі лише для OPM-only: `opm_productivity`, `opm_balance`, `opm_quality`, `opm_ultra`.
- Рекомендації:
  - Productivity: мінімум графічних модів, базові налаштування; орієнтація на стабільність і FPS.
  - Balance: вибіркові графічні ефекти зі стриманими параметрами; компроміс якість/продуктивність.
- Надалі буде додано параметр `performanceLevel` у `OMGSettings.cfg` і модульні патчі для графіки.

Примітка:
- Скрипт `tools/ActivateProfile.ps1` може бути відсутній у дистрибуції v0.0.1. Маркери `OMG_Enable_<PackId>` можуть бути створені вручну або іншим інструментом у майбутніх версіях.

Тестовий реліз 0.0.1:
- База: Stock + OPM через OMG-обгортку.
- Дистрибуція: GitHub Releases; з версії `0.1` — підготовка до SpaceDock/CKAN.
- Ліцензії: код — MIT (`LICENSE`); конфіги/ресурси — MIT або CC BY-NC-SA 4.0 (`LICENSE-CC-BY-NC-SA-4.0.txt`).